<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<title>PWMTimerCC26XX.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="tiapistylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table width="100%">
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border="0" src="tilogo.gif" /></a></td>
  <td bgcolor="red"><img src="titagline.gif" /></td>
</tr>
</table>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_2298ed0e5bfee6f293aea6c715ac7f7c.html">exports</a></li><li class="navelem"><a class="el" href="dir_fd93339bedb917e61f14a383cae95c74.html">tidrivers_cc13xx_cc26xx_3_20_01_00</a></li><li class="navelem"><a class="el" href="dir_3b1c21f291b9b5fd65602f608052e36b.html">source</a></li><li class="navelem"><a class="el" href="dir_ea9185700b4a00039b45040cbcc0570b.html">ti</a></li><li class="navelem"><a class="el" href="dir_4df65e1d267425c614acc66379e8abfd.html">drivers</a></li><li class="navelem"><a class="el" href="dir_16381cf2a482ab6baa44f8f1840d3504.html">pwm</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">PWMTimerCC26XX.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>PWM driver implementation for CC26XX/CC13XX. </p>
<hr/>
<h1>Overview</h1>
<p>The general PWM API should be used in application code, i.e. <a class="el" href="_p_w_m_8h.html#ae97f12cfc5530577069f76813504da3a" title="This function opens a given PWM instance and sets the period, duty and idle level to those specified ...">PWM_open()</a> should be used instead of PWMTimerCC26XX_open(). The board file will define the device specific config, and casting in the general API will ensure that the correct device specific functions are called.</p>
<h1>General Behavior</h1>
<p>Before using PWM on CC26XX:</p><ul>
<li>The Timer HW is configured and system dependencies (for example IOs, power, etc.) are set by calling <a class="el" href="_p_w_m_8h.html#ae97f12cfc5530577069f76813504da3a" title="This function opens a given PWM instance and sets the period, duty and idle level to those specified ...">PWM_open()</a>.</li>
</ul>
<h1>Error handling</h1>
<p>If unsupported arguments are provided to an API returning an error code, the PWM configuration will <em>not</em> be updated and PWM will stay in the mode it was already configured to.</p>
<h1>Power Management</h1>
<p>The TI-RTOS power management framework will try to put the device into the most power efficient mode whenever possible. Please see the technical reference manual for further details on each power mode.</p>
<p>The <a class="el" href="_p_w_m_timer_c_c26_x_x_8h.html" title="PWM driver implementation for CC26XX/CC13XX. ">PWMTimerCC26XX.h</a> driver is not explicitly setting a power constraint when the PWM is running to prevent standby as this is assumed to be done in the underlying GPTimer driver. The following statements are valid:</p><ul>
<li>After <a class="el" href="_p_w_m_8h.html#ae97f12cfc5530577069f76813504da3a" title="This function opens a given PWM instance and sets the period, duty and idle level to those specified ...">PWM_open()</a>: The device is still allowed to enter Standby. When the device is active the underlying GPTimer peripheral will be enabled and clocked.</li>
<li>After <a class="el" href="_p_w_m_8h.html#aa1bd0cc3f0fa52879422fca74d254378" title="Function to start the specified PWM handle with current settings. ">PWM_start()</a>: The device can only go to Idle power mode since the high-frequency clock is needed for PWM operation:</li>
<li>After <a class="el" href="_p_w_m_8h.html#ae83a4cd327a07d6037ff1a8d72fb3ae6" title="Function to stop the specified PWM handle. Output will set to the idle level specified by params in P...">PWM_stop()</a>: Conditions are equal as for after PWM_open</li>
<li>After <a class="el" href="_p_w_m_8h.html#a0e0f5899b067d27653db566fb148db11" title="Function to close a PWM instance specified by the PWM handle. ">PWM_close()</a>: The underlying GPTimer is turned off and the device is allowed to go to standby.</li>
</ul>
<h1>Accuracy</h1>
<p>The PWM output period and duty cycle are limited by the underlying timer. In PWM mode the timer is effectively 24 bits which results in a minimum frequency of 48MHz / (2^24-1) = 2.86Hz (349.525ms) The driver will round off the configured duty and period to a value limited by the timer resolution and the application is responsible for selecting duty and period that works with the underlying timer if high accuracy is needed. The effect of this is most visible when using high output frequencies as the available duty cycle resolution is reduced correspondingly. For a 24MHz PWM only a 0%/50%/100% duty is available as the timer uses only counts 0 and 1. Similarly for a 12MHz period the duty cycle will be limited to a 12.5% resolution. The PWM signals are generated using the high-frequency clock as source.</p>
<p>If very high-accuracy outputs are needed, the application should request using the external HF crystal: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;ti/sysbios/family/arm/cc26xx/Power.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;ti/sysbios/family/arm/cc26xx/PowerCC2650.h&gt;</span></div><div class="line"><a class="code" href="_power_8h.html#a25f2b780b7ea1ff1f515115fe1c2f519">Power_setDependency</a>(XOSC_HF);</div></div><!-- fragment --><h1>Limitations</h1>
<ul>
<li>The PWM output can currently not be synchronized with other PWM outputs</li>
<li>The PWM driver does not support updating duty and period using DMA.</li>
<li>When changing duty cycle there will be a period where the high level is either too short or too high since the timer match value is updated. <h1>PWM usage</h1>
</li>
</ul>
<h2>Basic PWM output</h2>
<p>The below example will output a 8MHz PWM signal with 50% duty cycle. </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> taskFxn(uintptr_t a0, uintptr_t a1) {</div><div class="line">  <a class="code" href="struct_p_w_m___config__.html">PWM_Handle</a> hPWM;</div><div class="line">  <a class="code" href="struct_p_w_m___params__.html">PWM_Params</a> pp;</div><div class="line">  <a class="code" href="_p_w_m_8h.html#acbdd3192f9f06bf689e4a3855926dcac">PWM_Params_init</a>(&amp;pp);</div><div class="line">  pp.<a class="code" href="struct_p_w_m___params__.html#ad0949da9ee4cf2c9c6f9d4a0c2220c79">idleLevel</a>      = <a class="code" href="_p_w_m_8h.html#acc99fb69a9bd9a6cc3710c4043893eb2a698cc876a94b3e0629d65fecfec8c8f5">PWM_IDLE_LOW</a>;</div><div class="line">  pp.period.unit    = <a class="code" href="_p_w_m_8h.html#a8dc2ea12024d7fb9c9b3e7de857c51d4a083c3462c199f39afc7a9d0541595b7a">PWM_PERIOD_HZ</a>;</div><div class="line">  pp.period.value   = 8e6;</div><div class="line">  pp.duty.unit      = <a class="code" href="_p_w_m_8h.html#a67e37012dcff827ed24c4efde25ee04da004d0d56bfc7f629990e7b6b55c3dd4f">PWM_DUTY_FRACTION</a>;</div><div class="line">  pp.duty.value     = <a class="code" href="_p_w_m_8h.html#a8b2763bf16c6446a35d536ea532f6a6c">PWM_DUTY_FRACTION_MAX</a> / 2;</div><div class="line">  hPWM = <a class="code" href="_p_w_m_8h.html#ae97f12cfc5530577069f76813504da3a">PWM_open</a>(Board_PWM0);</div><div class="line">  <span class="keywordflow">if</span>(hPWM == NULL) {</div><div class="line">    Log_error0(<span class="stringliteral">&quot;Failed to open PWM&quot;</span>);</div><div class="line">    Task_exit();</div><div class="line">  }</div><div class="line">  <a class="code" href="_p_w_m_8h.html#aa1bd0cc3f0fa52879422fca74d254378">PWM_start</a>(hPWM);</div><div class="line"></div><div class="line">  <span class="keywordflow">while</span>(1) {</div><div class="line">    Task_sleep(BIOS_WAIT_FOREVER);</div><div class="line">  }</div></div><!-- fragment --> </div><div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;<a class="el" href="_p_i_n_8h_source.html">ti/drivers/PIN.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="_p_w_m_8h_source.html">ti/drivers/PWM.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="_g_p_timer_c_c26_x_x_8h_source.html">ti/drivers/timer/GPTimerCC26XX.h</a>&gt;</code><br />
</div>
<p><a href="_p_w_m_timer_c_c26_x_x_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_p_w_m_timer_c_c26_x_x___hw_attrs.html">PWMTimerCC26XX_HwAttrs</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">PWMTimer26XX Hardware attributes.  <a href="struct_p_w_m_timer_c_c26_x_x___hw_attrs.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_p_w_m_timer_c_c26_x_x___object.html">PWMTimerCC26XX_Object</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">PWMTimer26XX Object.  <a href="struct_p_w_m_timer_c_c26_x_x___object.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">PWMTimerCC26XX specific control commands and arguments</div></td></tr>
<tr class="memitem:af011898e1f39f5c46e5bee16da53f893"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_w_m_timer_c_c26_x_x_8h.html#af011898e1f39f5c46e5bee16da53f893">PWMTimerCC26XX_CMD_DEBUG_STALL</a></td></tr>
<tr class="separator:af011898e1f39f5c46e5bee16da53f893"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Arguments for PWMTimerCC26XX_CMD_DEBUG_STALL</div></td></tr>
<tr class="memitem:a89d7c2f8674a7adb6d904b9cfb94c509"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_w_m_timer_c_c26_x_x_8h.html#a89d7c2f8674a7adb6d904b9cfb94c509">CMD_ARG_DEBUG_STALL_OFF</a></td></tr>
<tr class="separator:a89d7c2f8674a7adb6d904b9cfb94c509"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a922b8318640c67c3c20a4e991e9b486d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_w_m_timer_c_c26_x_x_8h.html#a922b8318640c67c3c20a4e991e9b486d">CMD_ARG_DEBUG_STALL_ON</a></td></tr>
<tr class="separator:a922b8318640c67c3c20a4e991e9b486d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a5d7ba49f8ef49f03deac6494bd0fc18e"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_p_w_m_timer_c_c26_x_x___hw_attrs.html">PWMTimerCC26XX_HwAttrs</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_w_m_timer_c_c26_x_x_8h.html#a5d7ba49f8ef49f03deac6494bd0fc18e">PWMTimerCC26XX_HwAttrs</a></td></tr>
<tr class="memdesc:a5d7ba49f8ef49f03deac6494bd0fc18e"><td class="mdescLeft">&#160;</td><td class="mdescRight">PWMTimer26XX Hardware attributes.  <a href="#a5d7ba49f8ef49f03deac6494bd0fc18e">More...</a><br /></td></tr>
<tr class="separator:a5d7ba49f8ef49f03deac6494bd0fc18e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a655ae995c6140ecdc5e97abf2f89c8ab"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_p_w_m_timer_c_c26_x_x___object.html">PWMTimerCC26XX_Object</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_w_m_timer_c_c26_x_x_8h.html#a655ae995c6140ecdc5e97abf2f89c8ab">PWMTimerCC26XX_Object</a></td></tr>
<tr class="memdesc:a655ae995c6140ecdc5e97abf2f89c8ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">PWMTimer26XX Object.  <a href="#a655ae995c6140ecdc5e97abf2f89c8ab">More...</a><br /></td></tr>
<tr class="separator:a655ae995c6140ecdc5e97abf2f89c8ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:af4a829750f9974fb6944f7d17fc7512d"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="_p_w_m_8h.html#a1c3809a9bd3c63a04edc1bafa78cc2e2">PWM_FxnTable</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_w_m_timer_c_c26_x_x_8h.html#af4a829750f9974fb6944f7d17fc7512d">PWMTimerCC26XX_fxnTable</a></td></tr>
<tr class="separator:af4a829750f9974fb6944f7d17fc7512d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="af011898e1f39f5c46e5bee16da53f893"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af011898e1f39f5c46e5bee16da53f893">&sect;&nbsp;</a></span>PWMTimerCC26XX_CMD_DEBUG_STALL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PWMTimerCC26XX_CMD_DEBUG_STALL</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Timer debug stall mode (stop PWM output debugger halts CPU) When enabled, PWM output will be HIGH when CPU is halted </p>

</div>
</div>
<a id="a89d7c2f8674a7adb6d904b9cfb94c509"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89d7c2f8674a7adb6d904b9cfb94c509">&sect;&nbsp;</a></span>CMD_ARG_DEBUG_STALL_OFF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CMD_ARG_DEBUG_STALL_OFF</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a922b8318640c67c3c20a4e991e9b486d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a922b8318640c67c3c20a4e991e9b486d">&sect;&nbsp;</a></span>CMD_ARG_DEBUG_STALL_ON</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CMD_ARG_DEBUG_STALL_ON</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a5d7ba49f8ef49f03deac6494bd0fc18e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d7ba49f8ef49f03deac6494bd0fc18e">&sect;&nbsp;</a></span>PWMTimerCC26XX_HwAttrs</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_p_w_m_timer_c_c26_x_x___hw_attrs.html">PWMTimerCC26XX_HwAttrs</a>  <a class="el" href="struct_p_w_m_timer_c_c26_x_x___hw_attrs.html">PWMTimerCC26XX_HwAttrs</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>PWMTimer26XX Hardware attributes. </p>
<p>These fields are used by the driver to set up underlying PIN and GPTimer driver statically. A sample structure is shown below:</p>
<div class="fragment"><div class="line"><span class="comment">// PWM configuration, one per PWM output</span></div><div class="line"><a class="code" href="struct_p_w_m_timer_c_c26_x_x___hw_attrs.html">PWMTimerCC26XX_HwAttrs</a> pwmtimerCC26xxHWAttrs[CC2650_PWMCOUNT] = {</div><div class="line"> { .<a class="code" href="struct_p_w_m_timer_c_c26_x_x___hw_attrs.html#a51bf646e2e56d0dbe1c3b79af314af08">pwmPin</a> = CC2650_LAUNCHXL_PWMPIN0, .gpTimerUnit = CC2650_LAUNCHXL_GPTIMER0A } ,</div><div class="line"> { .pwmPin = CC2650_LAUNCHXL_PWMPIN1, .gpTimerUnit = CC2650_LAUNCHXL_GPTIMER0B } ,</div><div class="line"> { .pwmPin = CC2650_LAUNCHXL_PWMPIN2, .gpTimerUnit = CC2650_LAUNCHXL_GPTIMER1A } ,</div><div class="line"> { .pwmPin = CC2650_LAUNCHXL_PWMPIN3, .gpTimerUnit = CC2650_LAUNCHXL_GPTIMER1B } ,</div><div class="line"> { .pwmPin = CC2650_LAUNCHXL_PWMPIN4, .gpTimerUnit = CC2650_LAUNCHXL_GPTIMER2A } ,</div><div class="line"> { .pwmPin = CC2650_LAUNCHXL_PWMPIN5, .gpTimerUnit = CC2650_LAUNCHXL_GPTIMER2B } ,</div><div class="line"> { .pwmPin = CC2650_LAUNCHXL_PWMPIN6, .gpTimerUnit = CC2650_LAUNCHXL_GPTIMER3A } ,</div><div class="line"> { .pwmPin = CC2650_LAUNCHXL_PWMPIN7, .gpTimerUnit = CC2650_LAUNCHXL_GPTIMER3B } ,</div><div class="line">};</div></div><!-- fragment --> 
</div>
</div>
<a id="a655ae995c6140ecdc5e97abf2f89c8ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a655ae995c6140ecdc5e97abf2f89c8ab">&sect;&nbsp;</a></span>PWMTimerCC26XX_Object</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_p_w_m_timer_c_c26_x_x___object.html">PWMTimerCC26XX_Object</a>  <a class="el" href="struct_p_w_m_timer_c_c26_x_x___object.html">PWMTimerCC26XX_Object</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>PWMTimer26XX Object. </p>
<p>These fields are used by the driver to store and modify PWM configuration during run-time. The application must not edit any member variables of this structure. Appplications should also not access member variables of this structure as backwards compatibility is not guaranteed. A sample structure is shown below: </p><div class="fragment"><div class="line"><span class="comment">// PWM object, one per PWM output</span></div><div class="line"><a class="code" href="struct_p_w_m_timer_c_c26_x_x___object.html">PWMTimerCC26XX_Object</a> pwmtimerCC26xxObjects[CC2650_PWMCOUNT];</div></div><!-- fragment --> 
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="af4a829750f9974fb6944f7d17fc7512d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4a829750f9974fb6944f7d17fc7512d">&sect;&nbsp;</a></span>PWMTimerCC26XX_fxnTable</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="_p_w_m_8h.html#a1c3809a9bd3c63a04edc1bafa78cc2e2">PWM_FxnTable</a> PWMTimerCC26XX_fxnTable</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><small>
Copyright  2017, Texas Instruments Incorporated
</small>
</body>
</html>
